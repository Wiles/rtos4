<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RTOS 4: RTOS4/rtos.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>RTOS4/rtos.h File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="_r_t_o_s4_2shared_8h_source.html">shared.h</a>&quot;</code><br/>

<p><a href="_r_t_o_s4_2rtos_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpdb.html">pdb</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ad1235d5ce36f7267285e82dccd428aa6">READY</a>&#160;&#160;&#160;'R'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a48f6457243719e7031768d4100741159">BLOCKED</a>&#160;&#160;&#160;'B'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a9a4cd85aaac46206276db6ce20aec5bc">REASON_NONE</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ac2692565e36789f1a2d3767301bf21ca">REASON_SLEEP</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a9e7bb35fde7e13390d80b79c41bd993e">REASON_KEYBOARD</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ab558d9e96d9c376d4e424777e57b7b6f">REASON_DEBUG_IN</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ad63aeb8227c36f58066d27ad7dfbc174">REASON_DEBUG_OUT</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a8fe83ac76edc595f6b98cd4a4127aed5">ERROR</a>&#160;&#160;&#160;-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a43635df1e9aabfd6b80cc0e96d3b3bb3">MAX_PDBS</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ad1d5a3a481c2b9d90652a5d5d965cbbd">TOTAL_STACK_MEMORY</a>&#160;&#160;&#160;8192</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a2fb476d2a94e0e54f1125306010164a1">RAM_START</a>&#160;&#160;&#160;0x00000000L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a385704542a5aed01d5f66618e0caff71">ROM_START</a>&#160;&#160;&#160;0x00FC0000L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a131dd02a9e1e01bfded25338141ca131">VECTOR_START</a>&#160;&#160;&#160;0x00FC0000L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a7c78836761fa3b5b124efea237dac70f">VECTOR_SIZE</a>&#160;&#160;&#160;0x400L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ae686d892538c456e32ae58896af246f0">__RTOS_H__</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structpdb.html">pdb</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#aeee2f535344e7b426635c9083b822897">PDB</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a2fe453da776d8062f863c5fd2f7dd27d">rtos_memcopy</a> (unsigned char *dest, unsigned char *src, int numBytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a26c5af6bb9bd7e1b4acc69cc24d3846f">RoundRobinScheduler</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Robin round scheduler.  <a href="#a26c5af6bb9bd7e1b4acc69cc24d3846f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#afd07ee42ab668e3b52879c7a072b5f66">rtos_strcpy</a> (char *dest, char *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ab6198077782239b5f378eab25e4129d9">InitOS</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#a847bffd57b071d94b506bf4471cc3839">InitializePDB</a> (int taskID, <a class="el" href="structpdb.html">PDB</a> *p, <a class="el" href="structtag_t_a_s_k.html">TASK</a> *t, char *stack, unsigned long initVal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r_t_o_s4_2rtos_8h.html#ac87223c05122352373be365f1c25cb94">DebugOutputInterrupt</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Fired on debugging input.  <a href="#ac87223c05122352373be365f1c25cb94"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ae686d892538c456e32ae58896af246f0"></a><!-- doxytag: member="rtos.h::__RTOS_H__" ref="ae686d892538c456e32ae58896af246f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __RTOS_H__</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00121">121</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a48f6457243719e7031768d4100741159"></a><!-- doxytag: member="rtos.h::BLOCKED" ref="a48f6457243719e7031768d4100741159" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCKED&#160;&#160;&#160;'B'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00021">21</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8fe83ac76edc595f6b98cd4a4127aed5"></a><!-- doxytag: member="rtos.h::ERROR" ref="a8fe83ac76edc595f6b98cd4a4127aed5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERROR&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00046">46</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43635df1e9aabfd6b80cc0e96d3b3bb3"></a><!-- doxytag: member="rtos.h::MAX_PDBS" ref="a43635df1e9aabfd6b80cc0e96d3b3bb3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PDBS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00048">48</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2fb476d2a94e0e54f1125306010164a1"></a><!-- doxytag: member="rtos.h::RAM_START" ref="a2fb476d2a94e0e54f1125306010164a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RAM_START&#160;&#160;&#160;0x00000000L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00060">60</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad1235d5ce36f7267285e82dccd428aa6"></a><!-- doxytag: member="rtos.h::READY" ref="ad1235d5ce36f7267285e82dccd428aa6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READY&#160;&#160;&#160;'R'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00020">20</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab558d9e96d9c376d4e424777e57b7b6f"></a><!-- doxytag: member="rtos.h::REASON_DEBUG_IN" ref="ab558d9e96d9c376d4e424777e57b7b6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REASON_DEBUG_IN&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block due to debugging input </p>

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00034">34</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad63aeb8227c36f58066d27ad7dfbc174"></a><!-- doxytag: member="rtos.h::REASON_DEBUG_OUT" ref="ad63aeb8227c36f58066d27ad7dfbc174" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REASON_DEBUG_OUT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blocked, because waiting on debugging output </p>

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00040">40</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9e7bb35fde7e13390d80b79c41bd993e"></a><!-- doxytag: member="rtos.h::REASON_KEYBOARD" ref="a9e7bb35fde7e13390d80b79c41bd993e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REASON_KEYBOARD&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block due to keyboard input </p>

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00029">29</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9a4cd85aaac46206276db6ce20aec5bc"></a><!-- doxytag: member="rtos.h::REASON_NONE" ref="a9a4cd85aaac46206276db6ce20aec5bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REASON_NONE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00023">23</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac2692565e36789f1a2d3767301bf21ca"></a><!-- doxytag: member="rtos.h::REASON_SLEEP" ref="ac2692565e36789f1a2d3767301bf21ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REASON_SLEEP&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00024">24</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a385704542a5aed01d5f66618e0caff71"></a><!-- doxytag: member="rtos.h::ROM_START" ref="a385704542a5aed01d5f66618e0caff71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROM_START&#160;&#160;&#160;0x00FC0000L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00061">61</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa90cac659d18e8ef6294c7ae337f6b58"></a><!-- doxytag: member="rtos.h::SUCCESS" ref="aa90cac659d18e8ef6294c7ae337f6b58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUCCESS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00042">42</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad1d5a3a481c2b9d90652a5d5d965cbbd"></a><!-- doxytag: member="rtos.h::TOTAL_STACK_MEMORY" ref="ad1d5a3a481c2b9d90652a5d5d965cbbd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOTAL_STACK_MEMORY&#160;&#160;&#160;8192</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00055">55</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c78836761fa3b5b124efea237dac70f"></a><!-- doxytag: member="rtos.h::VECTOR_SIZE" ref="a7c78836761fa3b5b124efea237dac70f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VECTOR_SIZE&#160;&#160;&#160;0x400L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00063">63</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<a class="anchor" id="a131dd02a9e1e01bfded25338141ca131"></a><!-- doxytag: member="rtos.h::VECTOR_START" ref="a131dd02a9e1e01bfded25338141ca131" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VECTOR_START&#160;&#160;&#160;0x00FC0000L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_r_t_o_s4_2rtos_8h_source.html#l00062">62</a> of file <a class="el" href="_r_t_o_s4_2rtos_8h_source.html">rtos.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aeee2f535344e7b426635c9083b822897"></a><!-- doxytag: member="rtos.h::PDB" ref="aeee2f535344e7b426635c9083b822897" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structpdb.html">pdb</a>  <a class="el" href="structpdb.html">PDB</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>PDB structure used internally by RTOS as per definition in Design Document 2008 </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac87223c05122352373be365f1c25cb94"></a><!-- doxytag: member="rtos.h::DebugOutputInterrupt" ref="ac87223c05122352373be365f1c25cb94" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugOutputInterrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fired on debugging input. </p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>This is the interrupt for handling debugging input from a serial device. </dd></dl>

<p>Definition at line <a class="el" href="service_8cpp_source.html#l00079">79</a> of file <a class="el" href="service_8cpp_source.html">service.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span> (<a class="code" href="globals_8cpp.html#ae75caef3d0f98e60f56633d766dac184">serial_out_blocked</a> || (<a class="code" href="globals_8c.html#a72d12f1dff94819ba3eaf73b3fb014ae">serial_out_head</a> != <a class="code" href="globals_8c.html#a3b2536f1acd0ab0408c098957566ebdc">serial_out_tail</a>))
        {
                <span class="keywordtype">short</span> key = <a class="code" href="globals_8c.html#ade0dbf38128704a39ac0db143f86c7a0">serial_out_data</a>[<a class="code" href="globals_8c.html#a72d12f1dff94819ba3eaf73b3fb014ae">serial_out_head</a>];
                <a class="code" href="globals_8c.html#ade0dbf38128704a39ac0db143f86c7a0">serial_out_data</a>[<a class="code" href="globals_8c.html#a72d12f1dff94819ba3eaf73b3fb014ae">serial_out_head</a>] = <span class="charliteral">&#39;\0&#39;</span>;

                <a class="code" href="globals_8c.html#a72d12f1dff94819ba3eaf73b3fb014ae">serial_out_head</a>++;

                <a class="code" href="globals_8cpp.html#ae75caef3d0f98e60f56633d766dac184">serial_out_blocked</a> = <a class="code" href="milestone4_2shared_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a847bffd57b071d94b506bf4471cc3839"></a><!-- doxytag: member="rtos.h::InitializePDB" ref="a847bffd57b071d94b506bf4471cc3839" args="(int taskID, PDB *p, TASK *t, char *stack, unsigned long initVal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int InitializePDB </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>taskID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpdb.html">PDB</a> *&#160;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtag_t_a_s_k.html">TASK</a> *&#160;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"> <em>initVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osinit_8c_source.html#l00134">134</a> of file <a class="el" href="osinit_8c_source.html">osinit.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="structpdb.html">PDB</a> *q;

        <span class="keywordflow">if</span> (p == <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
                <span class="comment">/* TODO: dynamically allocate PDB memory and check for errors */</span>

                <span class="keywordflow">if</span> (p == <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
                        <span class="keywordflow">return</span> <a class="code" href="milestone4_2shared_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
                }
        }       <span class="comment">/* endif */</span>

        <span class="comment">/*</span>
<span class="comment">         * initialize PDB housekeeping data</span>
<span class="comment">         */</span>

        p-&gt;<a class="code" href="structpdb.html#a96b07762f95ff75ee132fb38cdd1e337">ApplicationID</a> = taskID;
        <a class="code" href="milestone4_2rtos_8h.html#afd07ee42ab668e3b52879c7a072b5f66">rtos_strcpy</a> (p-&gt;<a class="code" href="structpdb.html#ad873facaaf26046b4217207b7f5d4d5a">ApplicationName</a>, t-&gt;<a class="code" href="structtag_t_a_s_k.html#af72f28bfcdf922aff129102a99b35c3f">ApplicationName</a>);

        <span class="comment">/* TODO: in the future, allocate space for globals and set pointer! */</span>
        p-&gt;<a class="code" href="structpdb.html#ae5ced6b7761b1b0fb9967c66ef32de46">AmountOfGlobalSpace</a> = t-&gt;<a class="code" href="structtag_t_a_s_k.html#a32d00b7fbd48dee8300a70a09b94e33f">AmountOfGlobalSpace</a>;
        p-&gt;<a class="code" href="structpdb.html#a7dbee8d9a732f20d7b1ea3c478a41604" title="Location of tasks globabl space.">PointerToGlobalSpace</a> = 0x5L;

        <span class="comment">/* TODO: in the future, if pStack is NULL, allocate stack dynamically */</span>
        p-&gt;<a class="code" href="structpdb.html#a939760e32daf7626201cd8c838ce4a3e">AmountOfStackSpace</a> = t-&gt;<a class="code" href="structtag_t_a_s_k.html#a8d21eebd018e9cb0e378045ccf418745">AmountOfStackSpace</a>;
        <span class="keywordflow">if</span> (pStack == <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
                p-&gt;<a class="code" href="structpdb.html#a9af58a52713d6381793794ac38c7c70f">PointerToStackSpace</a> = <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        } <span class="keywordflow">else</span> {
                p-&gt;<a class="code" href="structpdb.html#a9af58a52713d6381793794ac38c7c70f">PointerToStackSpace</a> = pStack;
        }

        <span class="comment">/*</span>
<span class="comment">         * remainder of basic PDB init</span>
<span class="comment">         */</span>

        p-&gt;<a class="code" href="structpdb.html#a263bc58313bedcf0393ac2f29c2a17c4">RegD0</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#a80a11f689d4c20d0aa3d2f56069c27be">RegD1</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#a2272c22d2a2ea378c4aedf378c41b0a2">RegD2</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#af08993c42c6e2b4cc7589334f5af05db">RegD3</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#ae9e9bb83c5bd53506e8da658324e832b">RegD4</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#a02fe1e09b3a21eaed2f5c1c458a8b7f4">RegD5</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#adb60d2e9d08a14d2ceca9b67d913de1e">RegD6</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#a7133a9950e1d6de310d3f9eb0eb9b0c2">RegD7</a> = initVal;

        p-&gt;<a class="code" href="structpdb.html#ae3170a6ac0b5e8eeffa9337adf6be26e">RegA0</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#aa5d1e5d75591d436e401788ff2a03b79">RegA1</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#a8d5da245eed2a77a72d11fff6988a2c9">RegA2</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#af58834192f12695112c9b32158679f24">RegA3</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#abe3695af1eddb5b295af7924dbc74432">RegA4</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#ae8d9964618c5e96e1692f6401e69c87c">RegA5</a> = initVal;
        p-&gt;<a class="code" href="structpdb.html#ae030e6c249cd8a6e8a2fb77b37c75044">RegA6</a> = initVal;

        p-&gt;<a class="code" href="structpdb.html#a2c0e327eab0df8b992ff2a4907f8ba59">RegSP</a> = (<span class="keywordtype">unsigned</span> long)(p-&gt;<a class="code" href="structpdb.html#a9af58a52713d6381793794ac38c7c70f">PointerToStackSpace</a> +
                p-&gt;<a class="code" href="structpdb.html#a939760e32daf7626201cd8c838ce4a3e">AmountOfStackSpace</a>);
        p-&gt;<a class="code" href="structpdb.html#aec5dc5b5bf4c33c1ee30373e50c14d58">RegPC</a> = t-&gt;<a class="code" href="structtag_t_a_s_k.html#adbd3cb8a8dd511291d267cd6cd81b1b4">PointerToCode</a>;
        p-&gt;<a class="code" href="structpdb.html#a1c1a55da61a4c2af24fcd4ad93207cae">RegSR</a> = 0x0000;      <span class="comment">/* all interrupts available, user mode */</span>
        p-&gt;<a class="code" href="structpdb.html#aff97a87345038b6d69b0a6de1f6efdf5">Status</a> = <a class="code" href="milestone4_2rtos_8h.html#ad1235d5ce36f7267285e82dccd428aa6">READY</a>;
        p-&gt;<a class="code" href="structpdb.html#adfb03271058360f2433c7ac6837ffc57">Reason</a> = <a class="code" href="milestone4_2rtos_8h.html#a9a4cd85aaac46206276db6ce20aec5bc">REASON_NONE</a>;
        p-&gt;<a class="code" href="structpdb.html#a0370837c3d36be2ec1076a19abb2239f">SleepDuration</a> = 0;

        <span class="comment">/*</span>
<span class="comment">         * add this to the global PDB list using standard</span>
<span class="comment">         * end of linked list insertion techniques</span>
<span class="comment">         */</span>

        <span class="keywordflow">if</span> (<a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a> == <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
                <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a> = p;
        } <span class="keywordflow">else</span> {
                q = <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a>;
                <span class="comment">/* find end of list when last element points to first (circular!) */</span>
                <span class="keywordflow">while</span> (q-&gt;<a class="code" href="structpdb.html#ae4dd6c64c219b91ad0db44e343fe8fa1">NextPDB</a> != <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a>) {
                        q = q-&gt;<a class="code" href="structpdb.html#ae4dd6c64c219b91ad0db44e343fe8fa1">NextPDB</a>;
                }
                q-&gt;<a class="code" href="structpdb.html#ae4dd6c64c219b91ad0db44e343fe8fa1">NextPDB</a> = p;
        }       <span class="comment">/* end while */</span>

        <span class="comment">/* </span>
<span class="comment">         * newest task will be added to end of list, thus</span>
<span class="comment">         * it&#39;s &quot;next&quot; will be the first to ensure it&#39;s</span>
<span class="comment">         * a circular list</span>
<span class="comment">         */</span>

        p-&gt;<a class="code" href="structpdb.html#ae4dd6c64c219b91ad0db44e343fe8fa1">NextPDB</a> = <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a>;
}       <span class="comment">/* end InitializePDB */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="ab6198077782239b5f378eab25e4129d9"></a><!-- doxytag: member="rtos.h::InitOS" ref="ab6198077782239b5f378eab25e4129d9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitOS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osinit_8c_source.html#l00049">49</a> of file <a class="el" href="osinit_8c_source.html">osinit.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="structpdb.html">PDB</a> *p;
        <span class="keywordtype">char</span> *ptrUserStackMem;

        <span class="comment">/*</span>
<span class="comment">         * copy ROM vector table to RAM, knowing that the first two</span>
<span class="comment">         * long integers are already mapped to first 2 long integers</span>
<span class="comment">         * of RAM.</span>
<span class="comment">         */</span>

        <a class="code" href="milestone4_2rtos_8h.html#a5e78dbf21c58679aa8b37329fae4514d">rtos_memcopy</a> (<a class="code" href="milestone4_2rtos_8h.html#a2fb476d2a94e0e54f1125306010164a1">RAM_START</a> + 2 * <span class="keyword">sizeof</span> (<span class="keywordtype">long</span>), 
                <a class="code" href="milestone4_2rtos_8h.html#a131dd02a9e1e01bfded25338141ca131">VECTOR_START</a> + 2 * <span class="keyword">sizeof</span> (<span class="keywordtype">long</span>), 
                <a class="code" href="milestone4_2rtos_8h.html#a7c78836761fa3b5b124efea237dac70f">VECTOR_SIZE</a> - 2 * <span class="keyword">sizeof</span> (<span class="keywordtype">long</span>));

        <span class="comment">/*</span>
<span class="comment">         * begin init process</span>
<span class="comment">         */</span>

        <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a> = <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <a class="code" href="globals_8c.html#a4aeadd3243fdca95786dd95dc58fa4e7">pdb_Current</a> = <a class="code" href="milestone4_2shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;


        <span class="comment">/*</span>
<span class="comment">         * set the pointer to the start of our stack memory</span>
<span class="comment">         * and divvy it up based on TASK structure definition. For</span>
<span class="comment">         * each init, move the pointer to the next block based on</span>
<span class="comment">         * the current task&#39;s amount of stack space reserved. </span>
<span class="comment">         *</span>
<span class="comment">         * TODO: in the future, this user stack memory concept will</span>
<span class="comment">         * be replaced by actual memory allocation support in our RTOS!</span>
<span class="comment">         */</span>

        ptrUserStackMem = <a class="code" href="milestone4_2globals_8h.html#a292a4f7643eb9b094ed42c50728f872a">application_stack_memory</a>;
        <a class="code" href="osinit_8c.html#a1627c93ae28daa198d4f7da6f326f8d6">InitializePDB</a> (1, &amp;<a class="code" href="structpdb.html">pdb</a>[0], &amp;<a class="code" href="osinit_8c.html#a41aaabd86fb4f03826f30453f74cb7af">taskTask1</a>, ptrUserStackMem, 0x11111111L);

        ptrUserStackMem += <a class="code" href="structpdb.html">pdb</a>[0].<a class="code" href="structpdb.html#a939760e32daf7626201cd8c838ce4a3e">AmountOfStackSpace</a>;   
        <a class="code" href="osinit_8c.html#a1627c93ae28daa198d4f7da6f326f8d6">InitializePDB</a> (2, &amp;<a class="code" href="structpdb.html">pdb</a>[1], &amp;<a class="code" href="osinit_8c.html#afe03f8ab8606ae019244101bf296c047">taskTask2</a>, ptrUserStackMem, 0x22222222L);

        ptrUserStackMem += <a class="code" href="structpdb.html">pdb</a>[1].<a class="code" href="structpdb.html#a939760e32daf7626201cd8c838ce4a3e">AmountOfStackSpace</a>;   
        <span class="comment">/* future tasks can be initialized the same way! */</span>

        <span class="comment">/*</span>
<span class="comment">         * ensure pdb_Current points to first task</span>
<span class="comment">         */</span>

        <a class="code" href="globals_8c.html#a4aeadd3243fdca95786dd95dc58fa4e7">pdb_Current</a> = <a class="code" href="globals_8c.html#a32c773383bd3fa3849068d16270b094f">pdb_First</a>;

        <span class="comment">/*</span>
<span class="comment">         * init our timer counter (to provide rudimentary </span>
<span class="comment">         * timing support)</span>
<span class="comment">         */</span>

        <a class="code" href="globals_8c.html#a5092bbc9e04487b450e965e9ac6d9bec">gTickCount</a> = 0;
        
        <a class="code" href="globals_8c.html#a725e2b350bbcfdce56aadcf50020bd2a">keyboard_head</a> = 0;
        <a class="code" href="globals_8c.html#a04b002df1014220cd0a9775b8da0b698">keyboard_tail</a> = 0;

        <a class="code" href="globals_8c.html#a81c48d65c560b905241af82a7189f7e0">serial_in_head</a> = 0;
        <a class="code" href="globals_8c.html#a4233c803dbb375f15303bade9f15c6e3">serial_in_tail</a> = 0;

        <a class="code" href="globals_8c.html#a72d12f1dff94819ba3eaf73b3fb014ae">serial_out_head</a> = 0;
        <a class="code" href="globals_8c.html#a3b2536f1acd0ab0408c098957566ebdc">serial_out_tail</a> = 0;
        
        
}       <span class="comment">/* end InitOS */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a26c5af6bb9bd7e1b4acc69cc24d3846f"></a><!-- doxytag: member="rtos.h::RoundRobinScheduler" ref="a26c5af6bb9bd7e1b4acc69cc24d3846f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RoundRobinScheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Robin round scheduler. </p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>This scheduler also checks for input blocking and executes input functions when required. </dd></dl>

<p>Definition at line <a class="el" href="support_8c_source.html#l00039">39</a> of file <a class="el" href="support_8c_source.html">support.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">while</span> (1) {
                <a class="code" href="globals_8c.html#a4aeadd3243fdca95786dd95dc58fa4e7">pdb_Current</a> = <a class="code" href="globals_8c.html#a4aeadd3243fdca95786dd95dc58fa4e7">pdb_Current</a>-&gt;<a class="code" href="structpdb.html#ae4dd6c64c219b91ad0db44e343fe8fa1">NextPDB</a>;
                <span class="keywordflow">if</span> (<a class="code" href="globals_8c.html#a4aeadd3243fdca95786dd95dc58fa4e7">pdb_Current</a>-&gt;<a class="code" href="structpdb.html#aff97a87345038b6d69b0a6de1f6efdf5">Status</a> == <a class="code" href="milestone4_2rtos_8h.html#ad1235d5ce36f7267285e82dccd428aa6">READY</a>)
                        <span class="keywordflow">break</span>;
        }       <span class="comment">/* end while */</span>
}       <span class="comment">/* end RoundRobinScheduler */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a2fe453da776d8062f863c5fd2f7dd27d"></a><!-- doxytag: member="rtos.h::rtos_memcopy" ref="a2fe453da776d8062f863c5fd2f7dd27d" args="(unsigned char *dest, unsigned char *src, int numBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtos_memcopy </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="support_8c_source.html#l00021">21</a> of file <a class="el" href="support_8c_source.html">support.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">while</span> (numBytes--) {
                *dest++ = *src++;
        }       <span class="comment">/* end while */</span>
}       <span class="comment">/* end rtos_memcopy */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="afd07ee42ab668e3b52879c7a072b5f66"></a><!-- doxytag: member="rtos.h::rtos_strcpy" ref="afd07ee42ab668e3b52879c7a072b5f66" args="(char *dest, char *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* rtos_strcpy </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="support_8c_source.html#l00057">57</a> of file <a class="el" href="support_8c_source.html">support.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">while</span> (*src != <span class="charliteral">&#39;\0&#39;</span>) {
                *dest++ = *src++;
        }

        <span class="keywordflow">return</span> dest;
}       <span class="comment">/* end rtos_strcpy */</span>
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Dec 15 2010 09:42:37 for RTOS 4 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
